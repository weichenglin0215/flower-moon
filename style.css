/* =========================================
   全站通用樣式（index.html）
   - 僅在必要時更新，避免影響既有版面
   - 與漢堡選單樣式分離（menu.css 專責）
   ========================================= */

:root {
    --bg-color: #5d1818;
    /* 1. Dark Red Background */
    --font-main: 'Noto Serif TC', serif;
}

* {
    box-sizing: border-box;
    margin: 0;
    padding: 0;
    -webkit-user-select: none;
    user-select: none;
}

body {
    background-color: var(--bg-color);
    font-family: var(--font-main);
    height: 100vh;
    overflow: hidden;
    display: flex;
    justify-content: center;
    align-items: center;
    /* Use dynamic vars generated by JS on specific card, body is static */
}

#cardContainer {
    position: relative;
    width: 90vw;
    height: 90vh;
    max-width: 450px;
    max-height: 800px;
    perspective: 1000px;
}

/* Card Styling with Dynamic Hue */
.card {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;

    /* 1. Card Background: Hue, S 15-20%, L 70-75% */
    /* We pick midpoints: S 18%, L 72% */
    --card-hue: 0;
    /* Default, overridden by JS */
    background-color: hsl(var(--card-hue), 18%, 72%);

    /* 3. Text Color: Same Hue, S 20%, L 20% */
    --main-text-color: hsl(var(--card-hue), 20%, 20%);
    color: var(--main-text-color);

    border-radius: 24px;
    box-shadow: 0 10px 30px rgba(0, 0, 0, 0.5);
    display: flex;
    padding: 24px;
    transition: transform 0.1s linear, opacity 0.3s ease;
    cursor: grab;
    will-change: transform;
}

.card:active {
    cursor: grabbing;
}

/* Layout Columns */
.col-left,
.col-right {
    flex: 0 0 40px;
    display: flex;
    flex-direction: column;
    justify-content: space-between;
    padding: 10px 0;
}

/* 農曆資訊*/
.col-right {
    /* 將農曆資訊往下移動 20% */
    padding-top: 20%;
    font-size: 1.5rem;
}

.col-center {
    flex: 1;
    display: flex;
    flex-direction: column;
    align-items: center;
    padding: 0 10px;
    position: relative;
    z-index: 2;
    /* Ensure text is above any potential decor */
}

/* Vertical Text Utilities */
.vertical-text {
    writing-mode: vertical-rl;
    text-orientation: mixed;
    letter-spacing: 0.2em;
}

/* 花月商標BRAND LOGO */
.brand-logo {
    writing-mode: vertical-rl;
    font-size: 1.5rem;
    font-weight: bold;
    letter-spacing: 0.5em;
    margin-top: auto;
    /* Adhere to rule 3: Main Text Color */
    color: var(--main-text-color);
}

/* 日曆 Date Header - Rule 2: whitesmoke */
.date-header {
    text-align: center;
    margin-top: 10px;
    margin-bottom: 10px;
    /* Explicitly use whitesmoke as requested */
    color: whitesmoke;
    /* Add shadow for visibility on L72% bg */
    text-shadow: 2px 2px 2px rgba(0, 0, 0, 0.3);
}

.year-month {
    font-size: 1.8rem;
    letter-spacing: 0.1em;
    font-weight: bold;
    margin: 0 0;
}

.day-number {
    font-size: 8rem;
    line-height: 1;
    font-weight: bold;
    margin: 1px 0;
}

.weekday {
    font-size: 2.6rem;
    font-weight: bold;
    margin: 0 0;
}

/* 宜忌Lucky / Unlucky */
.lucky-unlucky {
    display: flex;
    flex-direction: column;
    gap: 10px;
    font-size: 0.5rem;
    /*宜忌與上面日期下面詩句的間隔*/
    margin-top: 20px;
    margin-bottom: 40px;
    width: 100%;
    align-items: center;
}

.activity {
    display: flex;
    align-items: center;
    gap: 10px;
    font-size: 1rem;
}

.activity .label {
    width: 24px;
    height: 24px;
    border-radius: 50%;
    /* Use Main Text Color for "outline" or "fill"? 
       If limiting colors, maybe just outline. 
       Let's invert: Text Color BG, Card BG Text? 
       Or just simple text.
       User says "3 colors only".
       1. Card BG. 2. White. 3. Text Color.
       So label (circle) should be Text Color BG with Card BG text?
       Or just Text Color border.
    */
    background-color: var(--main-text-color);
    color: hsl(var(--card-hue), 18%, 72%);
    /* Back to card bg color for contrast */

    display: flex;
    justify-content: center;
    align-items: center;
    font-size: 1rem;
    font-weight: bold;
}

.activity .value {
    font-weight: 500;
}

/* Animation Classes */
.animate-recoil {
    transition: transform 0.5s cubic-bezier(0.34, 1.56, 0.64, 1), opacity 0.3s ease;
    /* Spring effect (overshoot) */
}

.animate-flyout {
    transition: transform 0.4s cubic-bezier(0.5, 0, 1, 0.5), opacity 0.4s ease;
    /* Accelerate */
}

/* Poem Section */
.poem-section {
    flex: 1;
    /* Take available space */
    display: flex;
    justify-content: center;
    align-items: center;
    /* Center lines vertically in space */
    gap: 0.5rem;
    /* Gap between vertical lines */
    width: 100%;
    position: relative;
    overflow: hidden;
    /* Prevent spill */
    min-height: 200px;
}

/*下方詩句*/
.poem-body {
    font-size: 1.8rem;
    font-weight: bold;
    /*line-height 行距*/
    line-height: 1.5;
    /* Tighter character spacing */
    height: 100%;
    max-height: 400px;
    text-align: justify;
    writing-mode: vertical-rl;
    /* Use gap in parent instead of margin on children for better control */
    display: flex;
    /* In vertical-rl, block axis is Right-to-Left. 
       flex-direction: column stacks items along the Block axis (R->L) */
    flex-direction: column;
    align-content: center;
    /* Limit height for approx 7 chars + spacing */
    max-height: 25rem;
}

.poem-line {
    margin: 0 4px;
    /* Reduced spacing between lines (columns) */
}

/* 左邊詩名作者名 Metadata Vertical (Left Column) */
.poem-meta-vertical-left {
    display: flex;
    flex-direction: row;
    /* T->B in vertical-rl */
    align-items: center;
    justify-content: center;
    flex: 1;
    /* Occupy middle space */
    writing-mode: vertical-rl;
    /* Vertical Text */
    gap: 12px;
    font-size: 1.5.rem;
    color: var(--main-text-color);
    letter-spacing: 0.2rem;
    margin: 10px 0;
}

.poem-title,
.poem-author {
    font-size: 1.5rem;
    opacity: 1;
}

.poem-title,
.poem-author {
    cursor: pointer;
}

/* Holidays (Left Col) */
.holidays-container {
    font-weight: bold;
    font-size: 1rem;
    writing-mode: vertical-rl;
    /* Adhere to rule 3 */
    color: var(--main-text-color);
}