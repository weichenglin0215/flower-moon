/* =========================================
   全站通用樣式（index.html）
   - 僅在必要時更新，避免影響既有版面
   - 與漢堡選單樣式分離（menu.css 專責）
   ========================================= */

:root {
    --bg-color: hsl(0, 60%, 24%);
    /* 1. Dark Red Background */
    --font-main: 'Noto Serif TC', serif;
}

* {
    box-sizing: border-box;
    margin: 0;
    padding: 0;
    -webkit-user-select: none;
    user-select: none;
}

body {
    background-color: var(--bg-color);
    font-family: var(--font-main);
    height: 100vh;
    overflow: hidden;
    display: flex;
    justify-content: center;
    align-items: center;

    /* 防止浏览器缩放影响布局 */
    zoom: 1;
    -webkit-text-size-adjust: 100%;
    -moz-text-size-adjust: 100%;
    -ms-text-size-adjust: 100%;
    text-size-adjust: 100%;
    /* Use dynamic vars generated by JS on specific card, body is static */
}

#cardContainer {
    position: relative;
    /* 宽高由 responsive.js 动态设置，保持 5:8 比例 */
    perspective: 1000px;
    /* 增加透視感 */
    width: var(--responsive-width, 400px);
    height: var(--responsive-height, 640px);
    margin: 0 auto;
    transition: width 0.3s ease, height 0.3s ease;
}

/* Card Styling with Dynamic Hue */
.card {
    position: absolute;
    /* 使用 inset 和 margin auto 实现居中 */
    inset: 0;
    margin: auto;

    /* 卡片是容器的90%，并居中显示 */
    width: 90%;
    height: 90%;

    /* 1. Card Background: Hue, S 15-20%, L 70-75% */
    /* We pick midpoints: S 18%, L 72% */
    --card-hue: 0;
    /* Default, overridden by JS */
    background-color: hsl(var(--card-hue), 18%, 72%);

    /* 3. Text Color: Same Hue, S 20%, L 20% */
    --main-text-color: hsl(var(--card-hue), 20%, 20%);
    color: var(--main-text-color);

    border-radius: 1rem;
    box-shadow: 0 0.6rem 1.8rem rgba(0, 0, 0, 0.5);
    display: flex;
    padding: 1rem 1.5rem;
    transition: transform 0.1s linear, opacity 0.3s ease;
    cursor: grab;
    will-change: transform;
}

.card:active {
    cursor: grabbing;
}

/* Layout Columns */
.col-left,
.col-right {
    flex: 0 0 0.6rem;
    /* 寬度很窄，適合垂直文字 */
    display: flex;
    flex-direction: column;
    justify-content: flex-start;
    /* 改為 flex-start，方便用 margin auto 推底部 */
    padding: 0 0;
    /* 上下 padding 調整美觀 */
    height: 100%;
    /* 確保有完整高度 */
}


/* ============ 右欄：農曆資訊和節日容器直排靠頂部 ============ */
.col-right {
    display: flex;
    flex-direction: row;
    /* 在 vertical-rl 模式下，row 表示垂直排列 */
    writing-mode: vertical-rl;
    gap: 1rem;
    /* 每個之間的空白間距 */
    justify-content: flex-start;
    /* 靠上方 */
    font-size: 1.2rem;
    color: var(--main-text-color);
}

.lunar-info {
    font-size: 1.2rem;
    writing-mode: vertical-rl;
    color: var(--main-text-color);
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
}

/* Holidays (Right Col) */
.holidays-container {
    font-weight: bold;
    white-space: nowrap;
    /* 防止换列 */
    overflow: hidden;
    /* 隐藏超出部分 */
    text-overflow: ellipsis;
    /* 超出显示省略号 */
    writing-mode: vertical-rl;
}

/* ============ 左欄：三個元素直排靠底部 ============ */
.col-left {
    justify-content: flex-end;
    /* 將內容推到底部 */
}

/* 左邊詩名作者名 Metadata Vertical (Left Column) */
.poem-meta-and-logo-left {
    display: flex;
    flex-direction: row;
    /* 在 vertical-rl 模式下，row 表示垂直排列，形成同一行 */
    writing-mode: vertical-rl;
    /* 整體直排 */
    gap: 1rem;
    /* 每個之間的空白間距 */
    color: var(--main-text-color);
    font-size: 1.2rem;
    padding-bottom: 1rem;
    /* 距離底邊一點內縮 */
}

.poem-title,
.poem-author {
    font-size: 1.2rem;
    opacity: 1;
    white-space: nowrap;
    /* 防止换列 */
    overflow: hidden;
    /* 隐藏超出部分 */
    text-overflow: ellipsis;
    /* 超出显示省略号 */
    cursor: pointer;
    writing-mode: vertical-rl;
}

.poem-title {
    font-weight: bold;
}

/* Vertical Text Utilities */
.vertical-text {
    writing-mode: vertical-rl;
    text-orientation: mixed;
    letter-spacing: 0.2em;
}

/* 花月商標BRAND LOGO */
.brand-logo {
    writing-mode: vertical-rl;
    font-size: 1.2rem;
    font-weight: bold;
    letter-spacing: 0.5rem;
    white-space: nowrap;
}

.col-center {
    flex: 1;
    display: flex;
    flex-direction: column;
    align-items: center;
    margin-top: 0rem;
    margin-bottom: 0rem;
    padding: 0 0rem;
    position: relative;
    z-index: 2;
    height: 100%;

    /* Ensure text is above any potential decor */
}



/* 日曆 Date Header - Rule 2: whitesmoke */
.date-header {
    text-align: center;
    /* Explicitly use whitesmoke as requested */
    color: whitesmoke;
    /* Add shadow for visibility on L72% bg */
    text-shadow: 2px 2px 2px rgba(0, 0, 0, 0.3);
}

.year-month {
    font-size: 1.6rem;
    letter-spacing: 0.1em;
    font-weight: bold;
    margin: 0 0;
}

.day-number {
    font-size: 6.4rem;
    line-height: 1;
    font-weight: bold;
    margin: 0 0;
}

.weekday {
    font-size: 2.4rem;
    font-weight: bold;
    margin: 0 0;
}

/* 宜忌Lucky / Unlucky */
.lucky-unlucky {
    display: flex;
    flex-direction: column;
    gap: 0rem;
    /*宜忌與上面日期下面詩句的間隔*/
    margin-top: 1rem;
    margin-bottom: 1rem;
    width: 100%;
    align-items: center;
    max-width: 20rem;
    /* 限制宽度避免过长 */
    max-height: 3.6rem;
    /* 限制高度避免过长 */
    overflow: hidden;
    /* 隐藏超出部分 */
}

.activity {
    display: flex;
    align-items: center;
    gap: 0.5rem;
}

.activity .label {
    width: 1.2rem;
    height: 1.2rem;
    margin-top: 0.15rem;
    margin-bottom: 0.15rem;
    border-radius: 50%;
    /* Use Main Text Color for "outline" or "fill"? 
       If limiting colors, maybe just outline. 
       Let's invert: Text Color BG, Card BG Text? 
       Or just simple text.
       User says "3 colors only".
       1. Card BG. 2. White. 3. Text Color.
       So label (circle) should be Text Color BG with Card BG text?
       Or just Text Color border.
    */
    background-color: var(--main-text-color);
    color: hsl(var(--card-hue), 18%, 72%);
    /* Back to card bg color for contrast */

    display: flex;
    justify-content: center;
    align-items: center;
    font-size: 0.8rem;
    font-weight: bold;
}

.activity .value {
    font-weight: 500;
    font-size: 1rem;
    max-width: 12rem;
    /* 限制宽度避免过长 */
    overflow: hidden;
    /* 隐藏超出部分 */
    text-overflow: ellipsis;
    /* 超出显示省略号 */
    white-space: nowrap;
    /* 防止换列 */
}

/* Animation Classes */
.animate-recoil {
    transition: transform 0.5s cubic-bezier(0.34, 1.56, 0.64, 1), opacity 0.3s ease;
    /* Spring effect (overshoot) */
}

.animate-flyout {
    transition: transform 0.4s cubic-bezier(0.5, 0, 1, 0.5), opacity 0.4s ease;
    /* Accelerate */
}

/* Poem Section */
.poem-section {
    flex: 1;
    /* Take available space */
    display: flex;
    justify-content: center;
    align-items: center;
    /* Center lines vertically in space */
    gap: 0.3rem;
    /* Gap between vertical lines */
    width: 100%;
    position: relative;
    overflow: hidden;
    /* Prevent spill */
    min-height: 10rem;
}

/*下方詩句*/
.poem-body {
    font-size: 1.8rem;
    font-weight: bold;
    /* Limit height for approx 7 chars + spacing */
    max-height: 16rem;
    /*line-height 行距*/
    line-height: 1.6;
    /* Tighter character spacing */
    height: 100%;
    text-align: center;
    writing-mode: vertical-rl;
    /* Use gap in parent instead of margin on children for better control */
    display: flex;
    /* In vertical-rl, block axis is Right-to-Left. 
       flex-direction: column stacks items along the Block axis (R->L) */
    flex-direction: column;
    align-content: center;
    overflow: hidden;
    /* 隐藏超出的内容 */
    /* 水平壓縮 0.9 倍 → 變窄長方形 */
    transform: scaleX(0.9);
}

.poem-line {
    margin: 0 0.2rem;
    /* Reduced spacing between lines (columns) */
    white-space: nowrap;
    /* 防止竖排文字换列 */
    overflow: hidden;
    /* 隐藏超出部分 */
    max-height: 16rem;
    /* 限制每列的最大高度 */
}